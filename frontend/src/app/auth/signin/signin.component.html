<div class="auth">
  <div
    class="wrapper"
    [style.background-image]="
      'url(' + backgroundImageUrl + ')'
    "
  >
    <div class="content">
      <div class="logo">
        <img
          *ngIf="logoUrl"
          [src]="logoUrl"
          width="240px"
          alt=""
        />
        <h1 *ngIf="!logoUrl">
          <app-i18n key="app.title"></app-i18n>
        </h1>
      </div>

      <form
        class="form"
        (ngSubmit)="signin()"
        [formGroup]="form"
      >
        <mat-form-field
          floatLabel="always"
          appearance="outline"
          class="w-100"
        >
          <mat-label>{{ fields.email.label }}</mat-label>
          <input
            matInput
            type="text"
            [formControlName]="fields.email.name"
            [errorStateMatcher]="errorStateMatcher"
            autocomplete="email"
            appAutofocus
          />
          <mat-error>
            <app-validations
              [control]="form.get(fields.email.name)"
              [label]="fields.email.label"
            ></app-validations>

            <span *ngIf="errorMessage">
              {{ errorMessage }}
            </span>
          </mat-error>
        </mat-form-field>

        <mat-form-field
          floatLabel="always"
          appearance="outline"
          class="w-100"
        >
          <mat-label>{{ fields.password.label }}</mat-label>
          <input
            matInput
            type="password"
            [formControlName]="fields.password.name"
            autocomplete="current-password"
          />
          <mat-error>
            <app-validations
              [control]="form.get(fields.password.name)"
              label="Password"
            ></app-validations>
          </mat-error>
        </mat-form-field>

        <div>
          <div
            style="
              display: flex;
              align-items: baseline;
              justify-content: space-between;
            "
            class="form-field w-100"
          >
            <mat-checkbox
              [formControlName]="fields.rememberMe.name"
              color="primary"
              >{{ fields.rememberMe.label }}</mat-checkbox
            >

            <a
              mat-button
              color="primary"
              routerLink="/auth/forgot-password"
            >
              <app-i18n
                key="auth.forgotPassword"
              ></app-i18n>
            </a>
          </div>
        </div>

        <div class="form-buttons">
          <button
            mat-raised-button
            class="w-100"
            type="submit"
            color="primary"
            [disabled]="loading"
          >
            <app-i18n key="auth.signin"></app-i18n>
          </button>
        </div>

        <div class="social-buttons">
          <a [href]="socialOauthLink('facebook')">
            <mat-icon
              matTooltip="Facebook"
              style="color: #3b5998"
              fontSet="fab"
              fontIcon="fa-facebook"
            ></mat-icon>
          </a>

          <a [href]="socialOauthLink('google')">
            <mat-icon
              matTooltip="Google"
              style="color: #db4437"
              fontSet="fab"
              fontIcon="fa-google"
            ></mat-icon>
          </a>
        </div>

        <div class="other-actions">
          <a
            mat-button
            color="primary"
            routerLink="/auth/signup"
          >
            <app-i18n key="auth.createAnAccount"></app-i18n>
          </a>
        </div>

        <app-i18n-flags></app-i18n-flags>
      </form>
    </div>
  </div>
</div>
